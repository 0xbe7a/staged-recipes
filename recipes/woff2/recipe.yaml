context:
  name: woff2
  version: "1.0.2"

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://github.com/google/woff2/archive/refs/tags/v${{ version }}.tar.gz
  sha256: add272bb09e6384a4833ffca4896350fdb16e0ca22df68c0384773c67a175594
  patches:
    - patches/001-include-cstdint.patch

build:
  number: 0
  script:
    - cmake ${CMAKE_ARGS} -S . -B build -GNinja 
    - cmake --build build
    - cmake --install build
    # Manually install binaries not handled by cmake --install
    - mkdir -p "${{ PREFIX }}/bin"
    - install -m755 build/woff2_info "${{ PREFIX }}/bin/woff2_info"
    - install -m755 build/woff2_decompress "${{ PREFIX }}/bin/woff2_decompress"
    - install -m755 build/woff2_compress "${{ PREFIX }}/bin/woff2_compress"
requirements:
  build:
    - ${{ compiler('c') }}
    - ${{ compiler('cxx') }}
    - ${{ stdlib('c') }}
    - cmake<=3.31.6
    - ninja
    - pkg-config
  host:
    - brotli

about:
  homepage: https://github.com/google/woff2
  summary: Web Open Font Format 2.0 library
  description: |
    Web Open Font Format (WOFF) 2.0 is an update to the existing WOFF 
    1.0 with improved compression that is achieved by using the 
    Brotli algorithm. The primary purpose of the WOFF2 format is to 
    efficiently package fonts linked to Web documents by means of CSS 
    @font-face rules.
  license: MIT
  license_file: LICENSE

extra:
  recipe-maintainers:
    - haecker-felix
    - Hofer-Julian
