context:
  name: xdg-dbus-proxy
  version: "0.1.6"

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://github.com/flatpak/xdg-dbus-proxy/releases/download/${{ version }}/xdg-dbus-proxy-${{ version }}.tar.xz
  sha256: 131bf59fce7c7ee7ecbc5d9106d6750f4f597bfe609966573240f7e4952973a1

build:
  number: 0
  skip: not linux
  script:
    - meson setup ${{ MESON_ARGS }} build -Dman=disabled --prefix=${{ PREFIX }}
    - ninja -C build
    - ninja -C build test
    - ninja -C build install

requirements:
  build:
    - ${{ compiler('c') }}
    - ${{ stdlib('c') }}
    - meson
    - ninja
    - pkg-config
    - dbus
  host:
    - glib
    - zlib
    - dbus

tests:
  - package_contents:
      files:
        - bin/xdg-dbus-proxy

about:
  homepage: https://github.com/flatpak/xdg-dbus-proxy
  summary: Filtering proxy for D-Bus connections
  description: |
    xdg-dbus-proxy is a filtering proxy for D-Bus connections. It was originally
    part of the flatpak project, but it has been broken out as a standalone module
    to facilitate using it in other contexts.
  license: LGPL-2.1-or-later
  license_file: COPYING

extra:
  recipe-maintainers:
    - haecker-felix
    - Hofer-Julian
