{% set version = '0.2.1' %}
{% set posix = 'm2-' if win else '' %}

package:
  name: r-tidycdisc
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/tidyCDISC_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/tidyCDISC/tidyCDISC_{{ version }}.tar.gz
  sha256: c65b6d390ee93b7bda31dcb697d81a19d3d3181309bca3acb3bbe2650a89f91a

build:
  number: 0
  noarch: generic
  rpaths:
    - lib/R/lib/
    - lib/
  missing_dso_whitelist:
    - '*/R.dll'        # [win]
    - '*/Rblas.dll'    # [win]
    - '*/Rlapack.dll'  # [win]

requirements:
  build:
    - {{ posix }}zip               # [win]
    - cross-r-base {{ r_base }}    # [build_platform != target_platform]
    # The libstdc++.dll provided in libstdcxx v15.1.0 build h904f734_2
    # is missing `_ZSt21ios_base_library_initv`.
    # see: conda-forge/ctng-compilers-feedstock#174
    - libstdcxx !=14.3.0,!=15.1.0  # [win]
  host:
    - r-base
    - r-dt
    - r-ggally
    - r-ideafilter
    - r-cicerone
    - r-config
    - r-dplyr
    - r-ggcorrplot
    - r-ggplot2
    - r-glue
    - r-golem
    - r-gt
    - r-haven
    - r-plotly
    - r-purrr
    - r-rlang
    - r-rmarkdown
    - r-shiny
    - r-shinywidgets
    - r-shinyjs
    - r-sjlabelled
    - r-stringr
    - r-survival
    - r-tidyr
    - r-timevis
    - r-tippy ==0.1.0
  run:
    - r-base
    - r-dt
    - r-ggally
    - r-ideafilter
    - r-cicerone
    - r-config
    - r-dplyr
    - r-ggcorrplot
    - r-ggplot2
    - r-glue
    - r-golem
    - r-gt
    - r-haven
    - r-plotly
    - r-purrr
    - r-rlang
    - r-rmarkdown
    - r-shiny
    - r-shinywidgets
    - r-shinyjs
    - r-sjlabelled
    - r-stringr
    - r-survival
    - r-tidyr
    - r-timevis
    - r-tippy ==0.1.0
  run_constrained:
    - libstdcxx !=14.3.0,!=15.1.0           # [win]

test:
  commands:
    - $R -e "library('tidyCDISC')"           # [not win]
    - "\"%R%\" -e \"library('tidyCDISC')\""  # [win]

about:
  home: https://github.com/Biogen-Inc/tidyCDISC/, https://Biogen-Inc.github.io/tidyCDISC/
  license: AGPL-3.0-or-later
  summary: Provides users a quick exploratory dive into common visualizations without writing
    a single line of code given the users data follows the Analysis Data Model (ADaM)
    standards put forth by the Clinical Data Interchange Standards Consortium (CDISC)
    <https://www.cdisc.org>. Prominent modules/ features of the application are the
    Table Generator, Population Explorer, and the Individual Explorer. The Table Generator
    allows users to drag and drop variables and desired statistics (frequencies, means,
    ANOVA, t-test, and other summary statistics) into bins that automagically create
    stunning tables with validated information. The Population Explorer offers various
    plots to visualize general trends in the population from various vantage points.
    Plot modules currently include scatter plot, spaghetti plot, box plot, histogram,
    means plot, and bar plot. Each plot type allows the user to plot uploaded variables
    against one another, and dissect the population by filtering out certain subjects.
    Last, the Individual Explorer establishes a cohesive patient narrative, allowing
    the user to interact with patient metrics (params) by visit or plotting important
    patient events on a timeline. All modules allow for concise filtering & downloading
    bulk outputs into html or pdf formats to save for later.
  license_family: AGPL
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/AGPL-3'

extra:
  recipe-maintainers:
    - conda-forge/r
