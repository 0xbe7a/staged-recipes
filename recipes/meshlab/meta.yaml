{% set name = "meshlab" %}
{% set version = "2023.12" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/cnr-isti-vclab/meshlab/archive/v{{ version }}.tar.gz
  sha256: 0ef40886952d7521bd76b50d6d57de994cf8693a910456fa31dcf4b72e843c41

build:
  number: 0
  skip: true  # [win]

requirements:
  build:
    - {{ compiler("c") }}
    - {{ compiler("cxx") }}
    - {{ stdlib("c") }}
    - cmake
    - make
    - llvm-openmp  # [osx]
    - libgomp      # [linux]
    - {{ cdt('mesa-libgl-devel') }}          # [linux]
    - {{ cdt('mesa-dri-drivers') }}          # [linux]
    - {{ cdt('mesa-libegl-devel') }}         # [linux]
    - {{ cdt('libselinux') }}                # [linux]
    - {{ cdt('libxdamage') }}                # [linux]
    - {{ cdt('libxfixes') }}                 # [linux]
    - {{ cdt('libxxf86vm') }}                # [linux]
    - {{ cdt('libxcb') }}                    # [linux]
    - {{ cdt('libxext') }}                   # [linux]
    - {{ cdt('xorg-x11-server-xvfb') }}      # [linux]
    - {{ cdt('libxau') }}                    # [linux]
    - {{ cdt('libxi-devel') }}               # [linux]
  host:
    - qt-main
    - libboost-devel
    - eigen
    - glew
    - libglu  # [linux]
    - cgal
    - igl
    - muparser
    - nexus
    - qhull
    - tinygltf
    - u3d
    - icu
    - gmp
    - mpfr
    - libcurl
  run:
    - xorg-libxt  # [linux]
    - {{ pin_compatible('libglu', max_pin='x.x') }}  # [linux]

test:
  commands:
    - meshlab --help

about:
  home: https://www.meshlab.net/#description
  summary: The open source system for processing and editing 3D triangular meshes
  description: |
    The open source system for processing and editing 3D triangular meshes.
    It provides a set of tools for editing, cleaning, healing, inspecting,
    rendering, texturing and converting meshes. It offers features for processing
    raw data produced by 3D digitization tools/devices and for preparing models
    for 3D printing.
  license: GPL-3.0-or-later
  license_file:
    - LICENSE.txt
    - src/external/easyexif/LICENSE
    - src/external/e57/LICENSE.md
    - src/external/lib3ds-1.3.0/COPYING
    - src/external/OpenCTM-1.0.3/LICENSE.txt
    - src/external/openkinect/APACHE20
    - src/external/xerces/LICENSE
  dev_url: https://github.com/cnr-isti-vclab/meshlab

extra:
  recipe-maintainers:
    - jeongseok-meta
