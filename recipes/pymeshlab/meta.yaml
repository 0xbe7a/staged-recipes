{% set name = "pymeshlab" %}
{% set version = "2023.12" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  - url: https://github.com/cnr-isti-vclab/PyMeshLab/archive/v{{ version }}.tar.gz
    sha256: 0ef40886952d7521bd76b50d6d57de994cf8693a910456fa31dcf4b72e843c41
  - url: https://github.com/cnr-isti-vclab/meshlab/archive/2dbd2f4b12df3b47d8777b2b4a43cabd9e425735.tar.gz
    sha256: 9236ad0d27e6712be247148789737598058c8f332e0333a36f48c54d0a475061
    folder: src/meshlab
  - url: https://github.com/pybind/pybind11/archive/80dc998efced8ceb2be59756668a7e90e8bef917.tar.gz
    sha256: aa4d57f8c3c4fb47d75e1d676167966a8aa7cbb014e4d20813adabc93bd6670a
    folder: src/pymeshlab/pybind11

build:
  number: 0
  skip: true  # [py>310]
  skip: true  # [osx]
  skip: true  # [win]

requirements:
  build:
    - {{ compiler("cxx") }}
    - {{ stdlib("c") }}
    - {{ cdt('mesa-libgl-devel') }}          # [linux]
    - {{ cdt('mesa-dri-drivers') }}          # [linux]
    - {{ cdt('mesa-libegl-devel') }}         # [linux]
    - {{ cdt('libselinux') }}                # [linux]
    - {{ cdt('libxdamage') }}                # [linux]
    - {{ cdt('libxfixes') }}                 # [linux]
    - {{ cdt('libxxf86vm') }}                # [linux]
    - {{ cdt('libxcb') }}                    # [linux]
    - {{ cdt('libxext') }}                   # [linux]
    - {{ cdt('xorg-x11-server-xvfb') }}      # [linux]
    - {{ cdt('libxau') }}                    # [linux]
    - {{ cdt('libxi-devel') }}               # [linux]
    - cmake
    - make
    - ninja
    - libgomp      # [linux]
    - llvm-openmp  # [osx]
  host:
    - cgal
    - eigen
    - glew
    - gmp
    - icu
    - igl
    - libboost-devel
    - libcurl
    - libglu  # [linux]
    - libgomp      # [linux]
    - llvm-openmp  # [osx]
    - mpfr
    - muparser
    - nexus
    - qhull
    - pip
    - python
    - qt-main
    - setuptools
    - tinygltf
    - u3d
    - wheel
  run:
    - numpy
    - python

test:
  imports:
    - pymeshlab
  commands:
    - pip list
    - pip check
  requires:
    - pip
    - python

about:
  home: https://github.com/cnr-isti-vclab/PyMeshLab
  summary: The open source mesh processing python library
  license: GPL-3.0-or-later
  license_file: LICENSE

extra:
  recipe-maintainers:
    - jeongseok-meta
