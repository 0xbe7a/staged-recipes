{% set name = "xncml" %}
{% set version = "0.5.0" %}
{% set python_min = "3.10" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.org/packages/source/{{ name[0] }}/{{ name }}/xncml-{{ version }}.tar.gz
  sha256: 91acbe3bd474e202866a43b76155bb8a759489bb17266bf234446f2c0ee4f868

build:
  noarch: python
  script: {{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  number: 0

requirements:
  host:
    - python {{ python_min }}
    - flit-core >=3.10.1,<4
    - pip
  run:
    - python >={{ python_min }}
    - cftime
    - dask-core
    - netcdf4
    - psutil
    - xarray
    - xmltodict
    - xsdata

test:
  imports:
    - xncml
  requires:
    - python {{ python_min }}
    - pip
    - pytest
  source_files:
    - src/xncml
    - tests
  commands:
    - pip check
    - python -m pytest --rootdir=tests -k "not test_to_ncml"  # skip test_core.test_to_ncml as it is not platform independent

about:
  home: https://github.com/xarray-contrib/xncml
  license: Apache-2.0
  license_family: Apache
  license_file: LICENSE
  summary: Tools for manipulating and opening NCML (NetCDF Markup) files with/for xarray
  description: |
    xncml is a Python package that provides tools for manipulating and opening NCML (NetCDF Markup) files with/for xarray.
    It is designed to add or modify existing attributes, variables, and dimensions of NetCDF files, as well as to facilitate
    concatenating multiple NetCDF files into a single xarray dataset via an xarray-compatible markup language.
  dev_url: https://github.com/xarray-contrib/xncml
  doc_url: https://xncml.readthedocs.io

extra:
  recipe-maintainers:
    - Zeitsperre
    - huard
