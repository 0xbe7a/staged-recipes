context:
  name: aider-chat
  version: "0.81.0"
  python_min: 3.9

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://github.com/Aider-AI/aider/archive/refs/tags/v${{ version }}.tar.gz
  sha256: 761356c8be7f688a4968be18e1132bbe6eb57da514961b55b27357083f2cdb45
  patches:
    - patches/include-subfolders.patch

build:
  noarch: python
  script: |
    echo "__version__ = '${{ version }}'" > aider/version.py
    python -m pip install . -vv
  number: 0
  python:
    entry_points:
      - aider = aider.main:main

requirements:
  host:
    - pip
    - python ${{ python_min }}.*
    - setuptools >=68
  run:
    - backoff
    - beautifulsoup4
    - configargparse
    - diff-match-patch
    - diskcache
    - flake8
    - GitPython
    - grep-ast
    - importlib-metadata <8.0.0
    - importlib-resources
    - json5
    - jsonschema
    - litellm
    - mccabe
    - mixpanel
    - networkx <3.3
    - pathspec
    - pexpect
    - pillow
    - posthog
    - prompt_toolkit
    - psutil
    - pydub
    - pycodestyle
    - pyflakes
    - pypandoc
    - pyperclip
    - PyYAML
    - rich
    - scipy <1.14
    - smmap
    - socksio
    - tree-sitter-c-sharp
    - tree-sitter-embedded-template
    - tree-sitter-language-pack
    - tree-sitter-yaml
    - pexpect
    - pysoundfile
    - python >=${{ python_min }}
    - python-sounddevice
    - watchfiles

tests:
  - python:
      imports:
        - aider
        - aider.main
      pip_check: true
  - script:
      - aider --help
      - python -m pytest tests/
    requirements:
      run:
        - python >=${{ python_min }}
    files:
      source:
        - tests/

about:
  homepage: https://github.com/Aider-AI/aider
  summary: 'aider is AI pair programming in your terminal.'
  description: |
    Aider lets you pair program with LLMs to start a new
    project or build on your existing codebase.
  license: Apache-2.0
  license_file: LICENSE.txt
  documentation: https://aider-chat.org/
  repository: https://github.com/Aider-AI/aider

extra:
  recipe-maintainers:
    - MementoRC
