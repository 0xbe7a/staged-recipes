schema_version: 1

context:
  name: libvalkey-py
  version: "4.0.1"

package:
  name: "${{ name }}"
  version: "${{ version }}"

source:
  - url: https://github.com/valkey-io/libvalkey-py/archive/refs/tags/v${{ version }}.zip
    sha256: 0682a4a2893eea4727561277b51e3abd5a618af17dda208626c698b76bd16f3a

  - url: https://github.com/valkey-io/libvalkey/archive/0635b070448825f10c27611189363d633ca75527.zip
    sha256: 872db349972ae776e283c302806aad97f757e86112bdd1e07b76e81032798eee
    target_directory: vendor/libvalkey

build:
  number: 0
  script:
    content:
      - ${{ PYTHON }} -m pip install --use-pep517 --no-build-isolation .

requirements:
  build:
    - python
    - setuptools
    - ${{ compiler('c') }}

  host:
    - python
    - setuptools
    - pip

  run:
    - python

tests:
  - python:
      imports:
        - libvalkey

about:
  license: MIT
  license_file:
    - LICENSE
  summary: Python extension that wraps protocol parsing code in libvalkey. It primarily speeds up parsing of multi bulk replies.
  description: |
    Python extension that wraps protocol parsing code in libvalkey.
    It primarily speeds up parsing of multi bulk replies.
  homepage: https://github.com/valkey-io/libvalkey-py
  repository: https://github.com/valkey-io/libvalkey-py

extra:
  recipe-maintainers:
    - trim21
