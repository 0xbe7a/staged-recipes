{% set name = "diffpy.srreal" %}
{% set version = "1.4.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.org/packages/source/d/diffpy_srreal/diffpy_srreal-{{ version }}.tar.gz
  sha256: 34988d5e8e1bf321523de989a48fcac99cba5ff205de26c699e396b9c5a95365

build:
  number: 0
  skip: true  # [py<311]
  script: {{ PYTHON }} -m pip install . -vv

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - {{ stdlib('c') }}
    - numpy
    - libobjcryst
  host:
    - python
    - pip
    - setuptools
    - setuptools-git-versioning
    - libboost-python-devel
    - libdiffpy
  run:
    - python
    - setuptools
    - numpy
    - libobjcryst
    - libdiffpy
    - pyobjcryst
    - periodictable
    - diffpy.structure

test:
  source_files:
    - tests
  requires:
    - pip
    - pytest
  commands:
    - pip check
    - pytest

about:
  home: https://github.com/diffpy/diffpy.srreal/
  summary: 'Open source (the license is 100% compatible with bsd-3 clause) calculators for PDF, 
    bond valence sum, and other quantities based on atom pair interaction.'
  description: |
    The diffpy.srreal package provides calculators for atomic pair distribution
    function (PDF), bond valence sums (BVS), atom overlaps for a hard-sphere
    model, bond distances and directions up to specified maximum distance.   The
    atomic structure models are represented with internal classes as non-periodic,
    periodic or structures with space group symmetries.  The package provides
    implicit adapters from diffpy.structure classes or from Crystal or Molecule
    objects from pyobjcryst.  Adapters can be easily defined for any other
    structure representations in Python allowing their direct use with the
    calculators.  Calculators support two evaluation models - BASIC, which
    performs a full pair-summation every time, and OPTIMIZED, which updates only
    pair contributions that have changed since the last evaluation.  Calculations
    can be split among parallel jobs using Python multiprocessing package or any
    other library that provides parallel map function.  PDF calculations can
    be done in two modes - either as a real-space summation of peak profiles
    (PDFCalculator) or as a reciprocal-space Debye summation and Fourier
    transform of the total scattering structure function (DebyePDFCalculator).
  license: LicenseRef-diffpy
  license_file: LICENSE.rst
  doc_url: http://www.diffpy.org/diffpy.srreal/
  dev_url: https://github.com/diffpy/diffpy.srreal

extra:
  recipe-maintainers:
    - pavoljuhas
    - sbillinge
    - Tieqiong
