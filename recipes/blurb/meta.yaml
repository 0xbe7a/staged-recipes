{% set name = "blurb" %}
{% set import = "blurb" %}
{% set entrypoint = "blurb" %}
{% set version = "2.0.0" %}
{% set sha256 = "c78d8114294225a4f7a2eabba6e05d36a6a50e45ba9f5a41afabc198350038e0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.org/packages/source/{{ name[0]|lower }}/{{ name|lower }}/{{ name | replace('-', '_') }}-{{ version }}.tar.gz
  sha256: {{ sha256 }}

build:
  noarch: python
  number: 0
  script: {{ PYTHON }} -m pip install . -vv
  entry_points:
    - {{ entrypoint }} = {{ import }}.{{ import }}:main

requirements:
  host:
    - python {{ python_min }}
    - hatch-vcs
    - hatchling
    - pip
  run:
    - python >={{ python_min }}

test:
  requires:
    - python {{ python_min }}
    - pip
  imports:
    - {{ import }}
    - {{ import }}.{{ import }}
  commands:
    - pip check
    - {{ entrypoint }} --help
    - {{ entrypoint }} --version
    - {{ entrypoint }} help add
    - {{ entrypoint }} help merge

about:
  home: https://github.com/python/blurb
  license: BSD-3-Clause
  license_family: BSD
  license_file: LICENSE.txt
  summary: Command-line tool to manage CPython Misc/NEWS.d entries.
  description: |
    Blurb is a tool designed to rid CPython core development
    of the scourge of Misc/NEWS conflicts.
    The core concept - split Misc/NEWS into many
    separate files that, when concatenated back together
    in sorted order, reconstitute the original Misc/NEWS file.
    After that, Misc/NEWS could be deleted from the CPython
    repo and thereafter rendered on demand (e.g. when building a release).
    When committing a change to CPython, the commit
    process will write out a new file that sorts into the correct place,
    using a filename unlikely to have a merge conflict.
    Blurb is a single command with a number of subcommands.
    It's designed  to be run inside a valid CPython (Git) repo,
    and automatically uses the correct file paths.
  dev_url: https://github.com/python/blurb
  doc_url: https://github.com/python/blurb/blob/main/README.md

extra:
  recipe-maintainers:
    - CAM-Gerlach
