{% set version = '0.3.2' %}
{% set posix = 'm2-' if win else '' %}

package:
  name: r-readmdtable
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/readMDTable_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/readMDTable/readMDTable_{{ version }}.tar.gz
  sha256: ef3990c8116e00f106cd0b68bfcfc9ad4498d8fbee6997f5a2d3e259539e9511

build:
  number: 0
  noarch: generic
  rpaths:
    - lib/R/lib/
    - lib/
  missing_dso_whitelist:
    - '*/R.dll'        # [win]
    - '*/Rblas.dll'    # [win]
    - '*/Rlapack.dll'  # [win]

requirements:
  build:
    - {{ posix }}zip               # [win]
    - cross-r-base {{ r_base }}    # [build_platform != target_platform]
  host:
    - r-base
    - r-cli
    - r-httr2
    - r-purrr
    - r-readr
    - r-stringr
  run:
    - r-base
    - r-cli
    - r-httr2
    - r-purrr
    - r-readr
    - r-stringr

test:
  commands:
    - $R -e "library('readMDTable')"           # [not win]
    - "\"%R%\" -e \"library('readMDTable')\""  # [win]

about:
  home: https://github.com/jrdnbradford/readMDTable, https://jrdnbradford.github.io/readMDTable/
  license: GPL-3.0-or-later
  summary: Efficient reading of raw markdown tables into tibbles. Designed to accept content
    from strings, files, and URLs with the ability to extract and read multiple tables
    from markdown for analysis.
  license_family: GPL3
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

extra:
  recipe-maintainers:
    - conda-forge/r
