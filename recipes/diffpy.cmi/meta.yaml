{% set name = "diffpy.cmi" %}
{% set version = "0.0.1" %}
{% set python_min = "3.11" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.org/packages/source/d/diffpy_cmi/diffpy_cmi-0.0.1.tar.gz
  sha256: 4ded89791626dbc4516a82bde8dec54e6d16e5b9e2d5c8dbd8d1e26b51cfb099

build:
  noarch: python
  number: 0
  script: {{ PYTHON }} -m pip install --no-deps --ignore-installed .
  entry_points:
    - diffpy-cmi = diffpy.cmi.diffpy_cmi_app:main
    - cmi = diffpy.cmi.diffpy_cmi_app:main

requirements:
  host:
    - python {{ python_min }}
    - setuptools
    - setuptools-git-versioning >=2.0
    - pip

  run:
    - python >={{ python_min }}
    - numpy
    - scipy
    - matplotlib-base
    - diffpy.structure
    - diffpy.utils
    - diffpy.srfit
    - libobjcryst 2024.2.1
    - pyobjcryst
    - periodictable
    - libdiffpy
    # - diffpy.srreal

test:
  requires:
    - python {{ python_min }}
    - pip
    - pytest

  source_files:
    - tests

  commands:
    - pip check
    - pytest

about:
  home: https://github.com/diffpy.cmi/diffpy.cmi/
  summary: "Complex modeling infrastructure: a modular framework for multi-modal modeling of scientific data."
  license: BSD-3-Clause
  license_family: BSD
  license_file: LICENSE.rst
  description: |
    DiffPy.CMI is designed as an extensible complex modeling infrastructure. Users and developers can readily integrate novel data types and constraints into custom workflows. While widely used for advanced analysis of structural data, the framework is general and can be applied to any problem where model parameters are refined to fit calculated quantities to data.DiffPy.CMI is a community-driven project that supports Unix, Linux, macOS, and Windows platforms. It is designed to be used in Python scripts enabling flexible scripting and automation for advanced and reproducible workflows. Users are encouraged to leverage the software for their modeling needs and to contribute feedback, use cases, and extensions through the project community.
  doc_url: http://diffpy.cmi.github.io/diffpy.cmi/
  dev_url: https://github.com/diffpy.cmi/diffpy.cmi/

extra:
  recipe-maintainers:
    - sbillinge
    - cadenmyers13
    - Tieqiong
