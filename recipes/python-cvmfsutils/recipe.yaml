context:
  version: "0.5.0"

package:
  name: python-cvmfsutils
  version: ${{ version }}

source:
  url: https://github.com/cvmfs-contrib/python-cvmfsutils/archive/v${{ version }}.tar.gz
  sha256: dece682debfdbb4e5eb0a0c7a22b28dcc97fc0846bc0c8c7715ed7d17f979a5e

build:
  noarch: python
  number: 0
  script:
    - python -m pip install . -vv --no-deps --no-build-isolation

requirements:
  host:
    - python >=3.6
    - pip
    - setuptools
  run:
    - python >=3.6
    - python-dateutil >=1.4.1
    - requests >=1.1.0
    - m2crypto >=0.20.0

tests:
  - python:
      imports:
        - cvmfs
      pip_check: true
  - package_contents:
      files:
        - python-scripts/big_catalogs
        - python-scripts/catdirusage
        - python-scripts/cvmfs_search
  - script:
      - catdirusage http://cvmfs-stratum-one.cern.ch/cvmfs/lhcb-condb.cern.ch /

about:
  homepage: https://github.com/cvmfs-contrib/python-cvmfsutils
  license: BSD-3-Clause
  license_file: COPYING
  summary: Inspect CernVM-FS repositories
  description: |
    Python utilities for inspection of CernVM-FS repositories.
    Allows browsing file catalog hierarchies, inspecting repository 
    manifests, and exploring named snapshot histories.
  repository: https://github.com/cvmfs-contrib/python-cvmfsutils

extra:
  recipe-maintainers:
    - chrisburr